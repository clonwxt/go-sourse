# 互联网协议介绍

![](../image/internerte.jpeg)

+ 流媒体直播: RMTP(TCP), HLS(HTTP), HTTP-FLV
+ 邮件服务: SMTP, POP3, IMAP
+ 微信,QQ: 自定义协议(基于TCP)
+ 物联网设备: 自定义协议(基于TCP)
+ 浏览器: HTTP/WebSocket
+ 其他应用(TCP上自定义, HTTP上自定义)

## 应用与协议

我们以熟悉的直播App的开发为例:

+ 直播原理：把主播录制的视频，推送到服务器，在由服务器分发给观众观看。
+ 直播环节：
    + 推流端: 采集、美颜处理、编码、推流
    + 服务端处理: 转码、录制、截图、鉴黄
    + 播放器: 拉流、解码、渲染
    + 互动系统: 聊天室、礼物系统、赞

![](../image/stream-flow.png)

其中有很多是业务逻辑, 涉及到网络通信的部分有几处:
+ 客户端推流(主播端) --> 服务端
+ 客户端拉流(观众端) <-- 服务器

那我们的数据是如何在他们之间相互传输的喃? 如何把数据传输出去？这就需要先讲讲互联网分层模型

## 互联网分层模型

互联网的逻辑实现被分为好几层。每一层都有自己的功能，就像建筑物一样，每一层都靠下一层支持。用户接触到的只是最上面的那一层，根本不会感觉到下面的几层。要理解互联网就需要自下而上理解每一层的实现的功能

![](../image/osi.jpg)

### 物理层

我们的电脑要与外界互联网通信，需要先把电脑连接网络，我们可以用双绞线、光纤、无线电波等方式。这就叫做”实物理层”，它就是把电脑连接起来的物理手段。它主要规定了网络的一些电气特性，作用是负责传送0和1的电信号

![](../image/phy.jpeg)

### 数据链路层

单纯的0和1没有任何意义，所以我们使用者会为其赋予一些特定的含义，规定解读电信号的方式：例如：多少个电信号算一组？每个信号位有何意义？这就是”数据链接层”的功能，它在”物理层”的上方，确定了物理层传输的0和1的分组方式及代表的意义。早期的时候，每家公司都有自己的电信号分组方式。逐渐地，一种叫做”以太网”（Ethernet）的协议，占据了主导地位



![](../image/frame.jpeg)


### 网络层



### 传输层



### 应用层


### 局域网与互联网


![](../image/frame-route.png)



## socket编程

Socket是应用层与TCP/IP协议族通信的中间软件抽象层。在设计模式中，Socket其实就是一个门面模式，它把复杂的TCP/IP协议族隐藏在Socket后面，对用户来说只需要调用Socket规定的相关函数，让Socket去组织符合指定的协议数据然后进行通信

![](../image/socket.png)




## 参考


+ [计算机网络之数据链路层基础详解](https://zhuanlan.zhihu.com/p/225668603)



